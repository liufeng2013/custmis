KISSY.Editor.add("button",function(){function c(a){c.superclass.constructor.call(this,a);this._init()}var f=KISSY.Editor,d=KISSY,k=d.Node;if(!f.TripleButton){c.ON="on";c.OFF="off";c.DISABLED="disabled";c.ON_CLASS="ke-triplebutton-on";c.OFF_CLASS="ke-triplebutton-off";c.DISABLED_CLASS="ke-triplebutton-disabled";c.ATTRS={state:{value:"off"},container:{},text:{},contentCls:{},cls:{},el:{}};d.extend(c,d.Base,{_init:function(){var a=this,g=a.get("container"),e=a.get("el"),h=a.get("title"),i=a.get("text"),
j=a.get("contentCls");a.el=new k("<a class='ke-triplebutton ke-triplebutton-off' href='#' role=\"button\"></a>");var b=a.el;b._4e_unselectable();a._attachCls();if(i)b.html(i);else if(j){b.html("<span class='ke-toolbar-item "+j+"'></span>");b.one("span")._4e_unselectable()}h&&b.attr("title",h);if(e)e[0].parentNode.replaceChild(b[0],e[0]);else g&&g.append(b);b.on("click",a._action,a);a.on("afterStateChange",a._stateChange,a);if(!a.get("cls")){b.on("mousedown",function(){a.get("state")=="off"&&b.addClass("ke-triplebutton-active")});
b.on("mouseup mouseleave",function(){a.get("state")=="off"&&b.hasClass("ke-triplebutton-active")&&setTimeout(function(){b.removeClass("ke-triplebutton-active")},300)})}},_attachCls:function(){var a=this.get("cls");a&&this.el.addClass(a)},_stateChange:function(a){this["_"+a.newVal]();this._attachCls()},disable:function(){this._savedState=this.get("state");this.set("state","disabled")},enable:function(){this.get("state")=="disabled"&&this.set("state",this._savedState)},_action:function(a){this.fire(this.get("state")+
"Click",a);this.fire("click",a);a.preventDefault()},bon:function(){this.set("state","on")},boff:function(){this.set("state","off")},_on:function(){this.el[0].className="ke-triplebutton ke-triplebutton-on"},_off:function(){this.el[0].className="ke-triplebutton ke-triplebutton-off"},_disabled:function(){this.el[0].className="ke-triplebutton ke-triplebutton-disabled"}});f.TripleButton=c}});
