KISSY.Editor.add("ext-focus",function(){function c(){b.log("FocusExt init");this.on("renderUI",this._renderUIFocusExt,this);this.on("bindUI",this._bindUIFocusExt,this);this.on("syncUI",this._syncUIFocusExt,this)}var b=KISSY,f=b.UA,d=b.Editor,g=d.focusManager;d.namespace("Ext");c.ATTRS={autoFocus4Editor:true};c.prototype={_syncUIFocusExt:function(){b.log("_syncUIFocusExt")},_renderUIFocusExt:function(){b.log("_renderUIFocusExt");var a=this.get("el");this.focus4Editor=(new b.Node("<a href='#' class='ke-focus' style='width:0;height:0;margin:0;padding:0;overflow:hidden;outline:none;font-size:0;'></a>")).appendTo(a)},
_bindUIFocusExt:function(){this.on("show",this._show4FocusExt,this);this.on("hide",this._hide4FocusExt,this)},_show4FocusExt:function(){var a=this._focusEditor=g.currentInstance();if(f.ie&&a){try{this.focus4Editor[0].focus()}catch(h){b.log(h)}var e=a.document.selection.createRange();if(e)if(e.item&&e.item(0).ownerDocument==a.document){a=document.body.createTextRange();a.moveToElementText(this.get("el")._4e_first()[0]);a.collapse(true);a.select()}}},_hide4FocusExt:function(){var a=this._focusEditor;
a&&a.focus()}};d.Ext.Focus=c},{host:"overlay"});
